!function(){"use strict";var e="",t=e+"d3610e9c6dce3cb370d8.svg",o=e+"2fc47fd8e9a9bcd9612f.jpg",n=e+"d38272e02bb4f1ab1c37.svg",r=e+"40608da7369d39bc1077.svg";const a={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},l=(e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),n.textContent=""},s=(e,t,o)=>{(e=>e.some(((e,t)=>!e.validity.valid)))(e)?c(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},c=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)};document.getElementById("logo-image").src=t,document.getElementById("avatar-image").src=o,document.getElementById("pencil-image").src=n,document.getElementById("plus-image").src=r;const i=document.querySelector(".profile__edit-button"),d=document.querySelector(".profile__add-button"),u=document.querySelector(".profile__name"),m=document.querySelector(".profile__description"),p=document.querySelector("#edit-profile-modal"),_=p.querySelector(".modal__form"),y=p.querySelector(".modal__close-button"),f=p.querySelector("#profile-name-input"),v=p.querySelector("#profile-description-input"),g=document.querySelector("#add-card-modal"),b=g.querySelector(".modal__form"),S=g.querySelector(".modal__submit-button"),h=g.querySelector(".modal__close-button"),q=g.querySelector("#add-card-link-input"),w=g.querySelector("#add-card-name-input"),E=document.querySelector("#preview-modal"),k=E.querySelector(".modal__image"),L=E.querySelector(".modal__caption"),C=E.querySelector(".modal__close-button_type_preview"),x=document.querySelector("#card-template"),A=document.querySelector(".cards__list");function B(e){e.classList.add("modal_opened"),document.addEventListener("keydown",I)}function z(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",I)}function j(e){const t=x.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return o.textContent=e.name,n.src=e.link,n.alt=e.alt,r.addEventListener("click",(()=>{r.classList.toggle("card__like-button_liked")})),a.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{B(E),k.src=e.link,k.alt=e.alt,L.textContent=e.name})),t}function I(e){"Escape"===e.key&&z(document.querySelector(".modal_opened"))}var D;i.addEventListener("click",(()=>{var e,t;f.value=u.textContent,v.value=m.textContent,e=p,t=a,[f,v].forEach((o=>{l(e,o,t)})),B(p)})),y.addEventListener("click",(()=>{z(p)})),d.addEventListener("click",(()=>{B(g)})),h.addEventListener("click",(()=>{z(g)})),C.addEventListener("click",(()=>{z(E)})),_.addEventListener("submit",(function(e){e.preventDefault(),u.textContent=f.value,m.textContent=v.value,z(p)})),b.addEventListener("submit",(function(e){e.preventDefault();const t=j({name:w.value,link:q.value});A.prepend(t),e.target.reset(),disableButton(S,a),z(g)})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg",alt:"A snowy resort nestled in the mountains"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg",alt:"An outside view from the street of a small outdoor restaurant"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg",alt:"Birdseye view of an outdoor cafe with customers sitting at small round tables"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg",alt:"A view from a suspended bridge over a forest and through trees"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg",alt:"A walking tunnel with light coming from both glass panes on either side"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg",alt:"A cozy cabin nestled in the snowy mountains"}].forEach((e=>{const t=j(e);A.append(t)})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(function(t){t.target.closest(".modal__container")||z(e)}))})),D=a,document.querySelectorAll(D.formSelector).forEach((e=>{((e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);s(o,n,t),o.forEach((r=>{r.addEventListener("input",(function(){((e,t,o)=>{t.validity.valid?l(e,t,o):((e,t,o,n)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.add(n.inputErrorClass),r.textContent=o})(e,t,t.validationMessage,o)})(e,r,t),s(o,n,t)}))}))})(e,D)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akIsRUFBT0wsaUJBQzdCTSxFQUFXSyxZQUFjNkUsQ0FBUSxFQVcvQkQsQ0FBZXBGLEVBQVFDLEVBQVNBLEVBQVFxRixrQkFBbUJwRixFQUc3RCxFQXFDSWlGLENBQW1CbkYsRUFBUUMsRUFBU0MsR0FDcENPLEVBQWtCQyxFQUFXQyxFQUFVVCxFQUN6QyxHQUFFLEdBQ0YsRUFNQThFLENBQWtCaEYsRUFBUUUsRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgZXJyb3JNc2csIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBcIlwiO1xufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0LCBjb25maWcpID0+IHtcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbmNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBidXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWwsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IGxvZ29TcmMgZnJvbSBcIi4uL2ltYWdlcy9sb2dvLnN2Z1wiO1xuY29uc3QgbG9nb0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dvLWltYWdlXCIpO1xubG9nb0ltYWdlLnNyYyA9IGxvZ29TcmM7XG5cbmltcG9ydCBhdmF0YXJTcmMgZnJvbSBcIi4uL2ltYWdlcy9hdmF0YXIuanBnXCI7XG5jb25zdCBhdmF0YXJJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXZhdGFyLWltYWdlXCIpO1xuYXZhdGFySW1hZ2Uuc3JjID0gYXZhdGFyU3JjO1xuXG5pbXBvcnQgcGVuY2lsU3JjIGZyb20gXCIuLi9pbWFnZXMvcGVuY2lsLnN2Z1wiO1xuY29uc3QgcGVuY2lsSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlbmNpbC1pbWFnZVwiKTtcbnBlbmNpbEltYWdlLnNyYyA9IHBlbmNpbFNyYztcblxuaW1wb3J0IHBsdXNTcmMgZnJvbSBcIi4uL2ltYWdlcy9wbHVzLnN2Z1wiO1xuY29uc3QgcGx1c0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbHVzLWltYWdlXCIpO1xucGx1c0ltYWdlLnNyYyA9IHBsdXNTcmM7XG5cbmltcG9ydCB7XG4gIGVuYWJsZVZhbGlkYXRpb24sXG4gIHNldHRpbmdzLFxuICByZXNldFZhbGlkYXRpb24sXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgICBhbHQ6IFwiQSBzbm93eSByZXNvcnQgbmVzdGxlZCBpbiB0aGUgbW91bnRhaW5zXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gICAgYWx0OiBcIkFuIG91dHNpZGUgdmlldyBmcm9tIHRoZSBzdHJlZXQgb2YgYSBzbWFsbCBvdXRkb29yIHJlc3RhdXJhbnRcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzMtcGhvdG8tYnktdHViYW51ci1kb2dhbi1mcm9tLXBleGVscy5qcGdcIixcbiAgICBhbHQ6IFwiQmlyZHNleWUgdmlldyBvZiBhbiBvdXRkb29yIGNhZmUgd2l0aCBjdXN0b21lcnMgc2l0dGluZyBhdCBzbWFsbCByb3VuZCB0YWJsZXNcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICAgIGFsdDogXCJBIHZpZXcgZnJvbSBhIHN1c3BlbmRlZCBicmlkZ2Ugb3ZlciBhIGZvcmVzdCBhbmQgdGhyb3VnaCB0cmVlc1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gICAgYWx0OiBcIkEgd2Fsa2luZyB0dW5uZWwgd2l0aCBsaWdodCBjb21pbmcgZnJvbSBib3RoIGdsYXNzIHBhbmVzIG9uIGVpdGhlciBzaWRlXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICAgIGFsdDogXCJBIGNvenkgY2FiaW4gbmVzdGxlZCBpbiB0aGUgc25vd3kgbW91bnRhaW5zXCIsXG4gIH0sXG5dO1xuXG4vL3Byb2ZpbGUgZWxlbWVudHNcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuLy9mb3JtIGVsZW1lbnRzXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXG4pO1xuY29uc3QgcHJvZmlsZU1vZGFsTmFtZUlucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLW5hbWUtaW5wdXRcIlxuKTtcbmNvbnN0IHByb2ZpbGVNb2RhbERlc2NyaXB0aW9uSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuLy9hZGQgY2FyZCBtb2RhbFxuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRGb3JtID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBjYXJkU3VibWl0QnRuID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XG5jb25zdCBjYXJkTW9kYWxDbG9zZUJ1dHRvbiA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBjYXJkTGlua0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xuXG4vL3ByZXZpZXcgY2FyZCBtb2RhbFxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgcHJldmlld01vZGFsSW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb25FbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2xvc2VCdXR0b24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvbl90eXBlX3ByZXZpZXdcIlxuKTtcblxuLy9jYXJkIGVsZW1lbnRzXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vL01vZGFsIG9wZW4vY2xvc2UgZnVuY3Rpb25zXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjQ2xvc2UpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0Nsb3NlKTtcbn1cblxuLy9maW5kIGFsbCBjbG9zZSBidXR0b25zXG4vKmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTsqL1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCBjYXJkTmFtZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgY2FyZE5hbWVFbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VFbC5hbHQgPSBkYXRhLmFsdDtcblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICBjYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICAgIHByZXZpZXdNb2RhbEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdNb2RhbEltYWdlRWwuYWx0ID0gZGF0YS5hbHQ7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTW9kYWxOYW1lSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHsgbmFtZTogY2FyZE5hbWVJbnB1dC52YWx1ZSwgbGluazogY2FyZExpbmtJbnB1dC52YWx1ZSB9O1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGlucHV0VmFsdWVzKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gIGRpc2FibGVCdXR0b24oY2FyZFN1Ym1pdEJ0biwgc2V0dGluZ3MpO1xuICBjbG9zZU1vZGFsKGNhcmRNb2RhbCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBwcm9maWxlTW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oXG4gICAgZWRpdFByb2ZpbGVNb2RhbCxcbiAgICBbcHJvZmlsZU1vZGFsTmFtZUlucHV0LCBwcm9maWxlTW9kYWxEZXNjcmlwdGlvbklucHV0XSxcbiAgICBzZXR0aW5nc1xuICApO1xuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59KTtcblxuLypjbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIC8vIEZpbmQgdGhlIGNsb3Nlc3QgcG9wdXAgb25seSBvbmNlXG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoJy5tb2RhbCcpO1xuICAvLyBTZXQgdGhlIGxpc3RlbmVyXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlUG9wdXAocG9wdXApKTtcbn0pO1xuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VQb3B1cChwb3B1cCkpO1xufSk7Ki9cblxucHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5jYXJkTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGNhcmRNb2RhbCk7XG59KTtcblxuY2FyZE1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xufSk7XG5cbnByZXZpZXdNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwocHJldmlld01vZGFsKTtcbn0pO1xuXG4vL0V2ZW50IGxpc3RlbmVycyBmb3IgZm9ybSBzdWJtaXNzaW9uXG5wcm9maWxlRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XG5jYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuXG4vL1JlbmRlciBpbml0aWFsIGNhcmRzXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xuICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG4vL0Nsb3NlIG1vZGFsIGJ5IGNsaWNraW5nIG91dHNpZGUgdGhlIG1vZGFsIGNvbnRhaW5lclxuZnVuY3Rpb24gaGFuZGxlT3ZlcmxheU1vZGFsQ2xvc2UoKSB7XG4gIGNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG4gIG1vZGFscy5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBpZiAoIWV2dC50YXJnZXQuY2xvc2VzdChcIi5tb2RhbF9fY29udGFpbmVyXCIpKSB7XG4gICAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cbmhhbmRsZU92ZXJsYXlNb2RhbENsb3NlKCk7XG5cbi8vIENsb3NlIG1vZGFsIGJ5IHVzaW5nIHRoZSBFc2NhcGUga2V5XG5mdW5jdGlvbiBoYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xuICAgIGNsb3NlTW9kYWwobW9kYWwpO1xuICB9XG59XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWwiLCJpbnB1dEVsIiwiY29uZmlnIiwiZXJyb3JNc2dFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsImhhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3JjIiwibG9nb1NyYyIsImF2YXRhclNyYyIsInBlbmNpbFNyYyIsInBsdXNTcmMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImNhcmRNb2RhbEJ1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsInByb2ZpbGVGb3JtRWxlbWVudCIsInByb2ZpbGVNb2RhbENsb3NlQnV0dG9uIiwicHJvZmlsZU1vZGFsTmFtZUlucHV0IiwicHJvZmlsZU1vZGFsRGVzY3JpcHRpb25JbnB1dCIsImNhcmRNb2RhbCIsImNhcmRGb3JtIiwiY2FyZFN1Ym1pdEJ0biIsImNhcmRNb2RhbENsb3NlQnV0dG9uIiwiY2FyZExpbmtJbnB1dCIsImNhcmROYW1lSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxJbWFnZUVsIiwicHJldmlld01vZGFsQ2FwdGlvbkVsIiwicHJldmlld01vZGFsQ2xvc2VCdXR0b24iLCJjYXJkVGVtcGxhdGUiLCJjYXJkc0xpc3QiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVFc2NDbG9zZSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbCIsImNhcmRJbWFnZUVsIiwiY2FyZExpa2VCdXR0b24iLCJjYXJkRGVsZXRlQnV0dG9uIiwibmFtZSIsImxpbmsiLCJhbHQiLCJ0b2dnbGUiLCJldnQiLCJrZXkiLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsImZvckVhY2giLCJwcmV2ZW50RGVmYXVsdCIsInByZXBlbmQiLCJ0YXJnZXQiLCJyZXNldCIsIml0ZW0iLCJhcHBlbmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvc2VzdCIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1zZyIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==